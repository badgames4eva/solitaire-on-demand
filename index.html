<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Basic HTML5 document setup -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solitaire On Demand</title>
    
    <!-- Progressive Web App (PWA) configuration -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Main stylesheet for game styling -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- PWA theme color for mobile browsers -->
    <meta name="theme-color" content="#2d5a27">
    
    <!-- App icons for different platforms -->
    <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192x192.png">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
</head>
<body>
    <!-- Main application container - all screens are contained within this div -->
    <div id="app">
        
        <!-- MAIN MENU SCREEN -->
        <!-- The starting screen with game options and navigation -->
        <!-- 'active' class determines which screen is currently visible -->
        <div id="main-menu" class="screen active">
            <h1>Solitaire On Demand</h1>
            
            <!-- Menu buttons container -->
            <!-- Each button has 'focusable' class for TV remote/keyboard navigation -->
            <!-- data-action and data-difficulty attributes are used by the app logic -->
            <div class="menu-options">
                <button class="menu-btn focusable" data-action="new-game" data-difficulty="easy">Easy Game</button>
                <button class="menu-btn focusable" data-action="new-game" data-difficulty="medium">Medium Game</button>
                <button class="menu-btn focusable" data-action="new-game" data-difficulty="hard">Hard Game</button>
                <button class="menu-btn focusable" data-action="stats">Statistics</button>
                <button class="menu-btn focusable" data-action="settings">Settings</button>
                <button class="menu-btn focusable" data-action="exit" style="background-color: #d32f2f; color: white;">Exit</button>
            </div>
            
            <!-- Version display in bottom right corner - loaded dynamically from manifest.toml -->
            <div class="version-display" id="version-display"></div>
        </div>

        <!-- GAME SCREEN -->
        <!-- The main gameplay screen where solitaire is played -->
        <div id="game-screen" class="screen">
            
            <!-- Game header with information and controls -->
            <div class="game-header">
                <!-- Left side: Game status information -->
                <div class="game-info">
                    <span id="difficulty-display">Medium</span>  <!-- Current difficulty level -->
                    <span id="timer">00:00</span>               <!-- Elapsed game time -->
                    <span id="moves-counter">Moves: 0</span>    <!-- Number of moves made -->
                    <span id="score">Score: 0</span>           <!-- Current game score -->
                </div>
                
                <!-- Right side: Game control buttons -->
                <div class="game-controls">
                    <button class="control-btn focusable" id="hint-btn">
                        <span class="btn-text">Hint</span>
                        <span class="remote-button-hint"></span>
                    </button>    <!-- Show available moves -->
                    <button class="control-btn focusable" id="undo-btn">
                        <span class="btn-text">Undo</span>
                        <span class="remote-button-hint"></span>
                    </button>    <!-- Undo last move -->
                    <button class="control-btn focusable" id="menu-btn">
                        <span class="btn-text">Menu</span>
                        <span class="remote-button-hint"></span>
                    </button>    <!-- Return to main menu -->
                </div>
            </div>

            <!-- GAME BOARD LAYOUT -->
            <!-- CSS Grid layout: 2 columns, 2 rows (stock/foundation on top, tableau spans bottom) -->
            <div class="game-board">
                
                <!-- FOUNDATION PILES (Top Right) -->
                <!-- These are the four suit-specific piles where cards are built up from Ace to King -->
                <!-- Each pile accepts only one suit and cards must be placed in ascending order -->
                <div class="foundation-area">
                    <div class="foundation-pile" data-suit="hearts" data-area="foundation"></div>
                    <div class="foundation-pile" data-suit="diamonds" data-area="foundation"></div>
                    <div class="foundation-pile" data-suit="clubs" data-area="foundation"></div>
                    <div class="foundation-pile" data-suit="spades" data-area="foundation"></div>
                </div>

                <!-- STOCK AND WASTE PILES (Top Left) -->
                <!-- Stock: Face-down cards that can be drawn from -->
                <!-- Waste: Face-up cards drawn from stock, top card is playable -->
                <div class="stock-area">
                    <!-- Fire TV Remote Hint for Stock Pile -->
                    <div class="remote-hint" id="stock-hint">
                        <span class="hint-icon">⏯️</span>
                        <span class="hint-text">Press Play/Pause to draw cards</span>
                    </div>
                    
                    <div class="stock-pile" data-area="stock"></div>      <!-- Click to draw cards -->
                    <div class="waste-pile" data-area="waste"></div>      <!-- Drawn cards appear here -->
                </div>

                <!-- TABLEAU (Seven Columns) -->
                <!-- The main playing area with seven columns of cards -->
                <!-- Cards are built down in alternating colors (red on black, black on red) -->
                <!-- Only Kings can be placed on empty columns -->
                <div class="tableau-area">
                    <div class="tableau-column" data-column="0" data-area="tableau"></div>
                    <div class="tableau-column" data-column="1" data-area="tableau"></div>
                    <div class="tableau-column" data-column="2" data-area="tableau"></div>
                    <div class="tableau-column" data-column="3" data-area="tableau"></div>
                    <div class="tableau-column" data-column="4" data-area="tableau"></div>
                    <div class="tableau-column" data-column="5" data-area="tableau"></div>
                    <div class="tableau-column" data-column="6" data-area="tableau"></div>
                </div>
            </div>

            <!-- SELECTED CARDS DISPLAY -->
            <!-- Shows cards that are currently selected/being moved -->
            <!-- Appears at bottom center of screen during card selection -->
            <div id="selected-cards" class="selected-cards"></div>
        </div>

        <!-- DEBUG PANEL FOR FIRE TV REMOTE TESTING -->
        <!-- Hidden by default, can be toggled on/off for testing remote events -->
        <div id="debug-panel" class="debug-panel">
            <div class="debug-header">
                <h3>Fire TV Remote Key Event Logger</h3>
                <button id="debug-toggle" class="debug-toggle-btn">Hide</button>
                <button id="debug-clear" class="debug-clear-btn">Clear</button>
            </div>
            <div class="debug-content">
                <div id="debug-log" class="debug-log"></div>
            </div>
        </div>

        <!-- STATISTICS SCREEN -->
        <!-- Displays player's game statistics and performance metrics -->
        <div id="stats-screen" class="screen">
            <h2>Game Statistics</h2>
            
            <!-- Statistics container with game performance data -->
            <div class="stats-content">
                <div class="stat-item">
                    <span class="stat-label">Games Played:</span>
                    <span class="stat-value" id="games-played">0</span>      <!-- Total games started -->
                </div>
                <div class="stat-item">
                    <span class="stat-label">Games Won:</span>
                    <span class="stat-value" id="games-won">0</span>         <!-- Successfully completed games -->
                </div>
                <div class="stat-item">
                    <span class="stat-label">Win Rate:</span>
                    <span class="stat-value" id="win-rate">0%</span>         <!-- Percentage of games won -->
                </div>
                <div class="stat-item">
                    <span class="stat-label">Average Game Time:</span>
                    <span class="stat-value" id="avg-time">00:00</span>      <!-- Average time to complete -->
                </div>
                <div class="stat-item">
                    <span class="stat-label">Best Time:</span>
                    <span class="stat-value" id="best-time">--:--</span>     <!-- Fastest completion time -->
                </div>
            </div>
            
            <!-- Navigation button to return to main menu -->
            <button class="menu-btn focusable" data-action="back-to-menu">Back to Menu</button>
        </div>

        <!-- SETTINGS SCREEN -->
        <!-- Game configuration options and preferences -->
        <div id="settings-screen" class="screen">
            <h2>Settings</h2>
            
            <!-- Settings options container -->
            <div class="settings-content">
                <!-- Auto-complete setting: automatically move cards to foundation when possible -->
                <div class="setting-item">
                    <label>Auto-complete when possible:</label>
                    <input type="checkbox" id="auto-complete" checked>
                </div>
                
                <!-- Hints setting: highlight available moves to help player -->
                <div class="setting-item">
                    <label>Show available moves:</label>
                    <input type="checkbox" id="show-hints" checked>
                </div>
                
                <!-- Sound effects setting: enable/disable game audio feedback -->
                <div class="setting-item">
                    <label>Sound effects:</label>
                    <input type="checkbox" id="sound-effects" checked>
                </div>
            </div>
            
            <!-- Navigation button to return to main menu -->
            <button class="menu-btn focusable" data-action="back-to-menu">Back to Menu</button>
        </div>

        <!-- GAME OVER MODAL -->
        <!-- Overlay dialog shown when game is completed (won or lost) -->
        <!-- Hidden by default, shown with 'active' class -->
        <div id="game-over-modal" class="modal">
            <div class="modal-content">
                <!-- Dynamic title (changes based on win/loss) -->
                <h2 id="game-over-title">Congratulations!</h2>
                
                <!-- Dynamic message (changes based on win/loss) -->
                <p id="game-over-message">You won the game!</p>
                
                <!-- Final game statistics display -->
                <div class="game-over-stats">
                    <p>Time: <span id="final-time">00:00</span></p>      <!-- Total game duration -->
                    <p>Moves: <span id="final-moves">0</span></p>        <!-- Total moves made -->
                    <p>Score: <span id="final-score">0</span></p>        <!-- Final score achieved -->
                </div>
                
                <!-- Action buttons for post-game options -->
                <div class="modal-buttons">
                    <button class="modal-btn focusable" data-action="new-game-same">Play Again</button>  <!-- Start new game with same difficulty -->
                    <button class="modal-btn focusable" data-action="back-to-menu">Main Menu</button>    <!-- Return to main menu -->
                </div>
            </div>
        </div>
    </div>

    <!-- JAVASCRIPT MODULE LOADING -->
    <!-- Scripts are loaded in dependency order - each module depends on the previous ones -->
    
    <script src="js/card.js"></script>        <!-- Card class: individual card representation and logic -->
    <script src="js/deck.js"></script>        <!-- Deck class: card collection management and shuffling -->
    <script src="js/game-state.js"></script>  <!-- GameState class: game data and state management -->
    <script src="js/tv-remote.js"></script>   <!-- TVRemoteHandler class: Fire TV remote and keyboard navigation -->
    <script src="js/difficulty.js"></script>  <!-- DifficultyManager class: game difficulty settings and scoring -->
    <script src="js/ui.js"></script>          <!-- UIManager class: user interface and DOM manipulation -->
    <script src="js/game.js"></script>        <!-- Game class: main game logic and rule enforcement -->
    <script src="js/app.js"></script>         <!-- App initialization and global coordination -->
</body>
</html>
